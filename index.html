<!DOCTYPE html>
<html>
  <head>
    <title>موقع محمد طه MIS</title>
  </head>
  <body>
    <h1>تخزين البيانات</h1>

    <input type="text" id="name" placeholder="الاسم" />
    <input type="email" id="email" placeholder="الإيميل" />
    <button onclick="saveData()">تخزين</button>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";
      import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDFuk2hFBDPDMfHHHQyASkR8VRYcoFNPXQ",
        authDomain: "my-dada-1bbf7.firebaseapp.com",
        projectId: "my-dada-1bbf7",
        storageBucket: "my-dada-1bbf7.appspot.com",
        messagingSenderId: "502973588428",
        appId: "1:502973588428:web:7c3a3cffed551ee63a7369",
        measurementId: "G-Q264WE6FS6"
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const database = getDatabase(app);

      function saveData() {
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;

        set(ref(database, "users/" + name), {
          username: name,
          email: email
        })
          .then(() => {
            alert("تم حفظ البيانات بنجاح!");
          })
          .catch((error) => {
            alert("حصل خطأ: " + error);
          });
      }
    </script>
  </body>
</html>
